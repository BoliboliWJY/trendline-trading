import matplotlib.pyplot as plt
import numpy as np

data = {'low_order': [[1733021958826, 95798.2, 1733049180146, 96854.8, 0.009909113435782269], [1733111129583, 97147.1, 1733111616985, 96855.5, -0.004010670534972171], [1733111708436, 96777.0, 1733111834864, 96486.6, -0.004009744358283939], [1733119821617, 96341.9, 1733124234855, 96052.8, -0.004009802941715378], [1733124318026, 95955.6, 1733127455025, 95667.5, -0.004011472025505002], [1733135896037, 95063.5, 1733138660070, 95253.7, 0.0009967728287719755], [1733143966869, 94986.9, 1733157463205, 96466.1, 0.014333884131316754], [1733162136033, 95132.5, 1733162313334, 94847.1, -0.0040090535187685674], [1733162343285, 94524.4, 1733162466324, 94713.6, 0.0009976011892696155], [1733188886275, 95736.9, 1733193054578, 95928.4, 0.0009962805592504962], [1733223267622, 95083.8, 1733223382620, 94798.5, -0.004009541290210249], [1733223423126, 94749.0, 1733224482589, 94938.5, 0.0009960290082526866], [1733230470512, 94811.7, 1733232007168, 94527.2, -0.004009715722035455], [1733232055906, 94563.6, 1733233066027, 94752.8, 0.0009967747654949797], [1733233967828, 94217.9, 1733234136210, 93935.2, -0.004009521457345121], [1733234273261, 93808.6, 1733234514249, 93996.6, 0.0010000723430422251], [1733318440884, 95852.3, 1733320162173, 95564.6, -0.0040105290034174726], [1733324495498, 95506.2, 1733327831018, 95697.5, 0.0009990072885917032], [1733331031290, 94721.1, 1733331405495, 94910.4, 0.0009945127193646828], [1733403093018, 102835.7, 1733403323421, 103041.4, 0.0009962849883639055], [1733424798239, 100552.1, 1733425107031, 100250.4, -0.004009464301389375], [1733437288639, 98234.8, 1733437601175, 97940.0, -0.004010006126199727], [1733437606356, 97537.0, 1733437610056, 97244.0, -0.004013039364896608], [1733437614397, 96807.3, 1733437616611, 96516.8, -0.0040098387016561645], [1733437684593, 95937.7, 1733437687544, 95649.5, -0.004013084229400054], [1733437689828, 95486.2, 1733437692570, 95199.7, -0.00400946326511542], [1733437692571, 95285.2, 1733437694056, 94999.3, -0.004009495859443101], [1733437694212, 95068.9, 1733437694922, 94783.4, -0.004012130816155478], [1733437694993, 94747.9, 1733437695650, 94462.6, -0.004020242932123329], [1733437699727, 93616.7, 1733437700076, 93333.6, -0.004033205619412449], [1733437701752, 93155.9, 1733437702346, 93343.9, 0.0010140576941825028], [1733437705029, 92894.1, 1733437706706, 92615.3, -0.004010301753598066], [1733437706800, 92714.9, 1733437707558, 92436.4, -0.004012882371014047], [1733437712372, 91817.8, 1733437713033, 91542.0, -0.004012824714338835], [1733437713036, 91932.0, 1733437713036, 91478.7, -0.005955251878306033], [1733437713036, 91934.0, 1733437713036, 91475.6, -0.006011172378207807], [1733437713036, 91934.0, 1733437713036, 91474.3, -0.006025455237154031], [1733437713036, 91934.0, 1733437713036, 91472.9, -0.006040837231573558], [1733437719742, 91157.9, 1733437719742, 90382.3, -0.009581326210994834], [1733437719742, 91157.9, 1733437719742, 90500.0, -0.008269613259668351], [1733437719742, 91157.9, 1733437719742, 90382.3, -0.009581326210994834], [1733437719742, 91157.9, 1733437719744, 90382.3, -0.009581326210994834], [1733437719745, 91011.6, 1733437719745, 90382.3, -0.00796264644736866], [1733437719747, 91168.2, 1733437719756, 90500.2, -0.008381199157570962], [1733437719838, 90922.5, 1733437719869, 90410.9, -0.0066586097472761665], [1733437719869, 91070.8, 1733437719870, 90366.8, -0.008790471721915494], [1733437719873, 91070.8, 1733437719875, 90694.0, -0.005154629854235203], [1733437720015, 91076.6, 1733437720225, 90800.1, -0.004045150831331611], [1733476705272, 98202.1, 1733478716114, 98398.8, 0.000999008117985146], [1733498216981, 98765.6, 1733498379087, 98963.4, 0.0009987187182330945], [1733521617932, 100645.8, 1733526689478, 100343.7, -0.00401065238774334], [1733535089086, 99962.0, 1733537160548, 100162.1, 0.000997761628400374], [1733566941646, 99587.3, 1733571876022, 99786.6, 0.000997262157444002], [1733704158734, 100097.9, 1733704456259, 99797.6, -0.004009090398967462], [1733708670919, 99644.0, 1733711217130, 99345.0, -0.004009713624238852], [1733728624028, 98464.0, 1733736385436, 98661.1, 0.0009977478459088926], [1733738475824, 98445.2, 1733742216622, 98642.1, 0.0009961051113065453], [1733758052278, 98414.4, 1733758391419, 98119.1, -0.00400960771144454], [1733758533275, 97885.9, 1733759556418, 97592.2, -0.004009461821743997], [1733767187425, 97452.2, 1733770868553, 97647.1, 0.0009959630137506012], [1733771075773, 97466.9, 1733773315048, 97174.4, -0.004010052030164356], [1733773412886, 97235.0, 1733775561839, 96943.1, -0.004011044623082881], [1733778310074, 94457.8, 1733778313102, 94174.0, -0.004013570624588624], [1733841567311, 97238.9, 1733841736341, 97433.5, 0.000997259669415663], [1733844188375, 97337.4, 1733844402105, 97045.3, -0.004009934535727066], [1733844433104, 96967.6, 1733844645165, 96676.6, -0.0040100355204878415], [1733848707075, 94928.9, 1733848898830, 94644.0, -0.004010227801022669], [1733852434096, 94489.2, 1733853304862, 94678.5, 0.0009993979625786418], [1733909946422, 97839.9, 1733912257003, 98036.2, 0.001002321591412226], [1733964611634, 100598.7, 1733966366409, 100800.0, 0.0009970238095238235], [1733983313092, 100634.6, 1733992038062, 100835.9, 0.00099631282112811], [1733997734073, 100672.7, 1734001860943, 100370.6, -0.0040098455125304735], [1734014279634, 100682.7, 1734014279634, 100682.7, -0.001], [1734014464738, 100667.5, 1734014464738, 100667.5, -0.001], [1734016573826, 100747.9, 1734016646006, 100949.4, 0.0009960495059900829], [1734031770442, 99920.7, 1734032166205, 99620.9, -0.004009408668261493], [1734052657702, 99868.3, 1734053324007, 99568.6, -0.004009985075616228], [1734053715696, 99637.8, 1734054630521, 99338.8, -0.004009901468509879], [1734105078909, 100208.1, 1734105173072, 99907.3, -0.0040107910032599605], [1734105195701, 99860.4, 1734106284032, 100060.5, 0.0009997901269732665], [1734180029834, 101282.2, 1734182257988, 100978.2, -0.004010550792151179], [1734197907554, 101136.2, 1734202379962, 100832.7, -0.00400993626075674], [1734331833018, 105032.4, 1734333194389, 105242.6, 0.00099729007075089], [1734350043281, 103788.4, 1734350832684, 103996.0, 0.0009962306242548022], [1734404316070, 106195.7, 1734410265663, 106418.5, 0.0010936209399681216], [1734449268872, 105989.1, 1734449268872, 105989.1, -0.001], [1734449288972, 105989.4, 1734449288972, 105989.4, -0.001], [1734449320314, 105989.4, 1734449320314, 105989.4, -0.001], [1734449346111, 105989.0, 1734449346111, 105989.0, -0.001], [1734449534477, 105979.5, 1734449534477, 105979.5, -0.001], [1734475549027, 105384.6, 1734475549027, 105384.6, -0.001], [1734475549027, 105384.6, 1734475549027, 105384.6, -0.001], [1734475549027, 105384.6, 1734475549027, 105384.6, -0.001], [1734475549027, 105384.6, 1734475549027, 105384.6, -0.001], [1734475549027, 105384.6, 1734475549027, 105384.6, -0.001], [1734475549028, 105384.6, 1734475549028, 105384.6, -0.001], [1734475549028, 105384.6, 1734475549028, 105384.6, -0.001], [1734475549028, 105384.6, 1734475549028, 105384.6, -0.001], [1734475549028, 105384.6, 1734475549028, 105384.6, -0.001], [1734475549028, 105384.6, 1734475549028, 105384.6, -0.001], [1734475549028, 105384.6, 1734475549028, 105384.6, -0.001], [1734475549028, 105384.6, 1734475549028, 105384.6, -0.001], [1734475549028, 105384.6, 1734475549028, 105384.6, -0.001], [1734475549028, 105384.6, 1734475549028, 105384.6, -0.001], [1734475549028, 105384.6, 1734475549028, 105384.6, -0.001], [1734475549028, 105385.2, 1734475549028, 105385.2, -0.001], [1734475549028, 105385.2, 1734475549028, 105385.2, -0.001], [1734475549028, 105385.2, 1734475549028, 105385.2, -0.001], [1734475549029, 105385.2, 1734475549029, 105385.2, -0.001], [1734475549029, 105385.2, 1734475549029, 105385.2, -0.001], [1734475549029, 105385.2, 1734475549029, 105385.2, -0.001], [1734475549030, 105385.2, 1734475549030, 105385.2, -0.001], [1734475549030, 105386.4, 1734475549030, 105386.4, -0.001], [1734475549030, 105386.4, 1734475549030, 105386.4, -0.001], [1734475549030, 105386.4, 1734475549030, 105386.4, -0.001], [1734475549030, 105386.4, 1734475549030, 105386.4, -0.001], [1734475549030, 105386.4, 1734475549030, 105386.4, -0.001], [1734475553725, 105321.0, 1734475553725, 105321.0, -0.001], [1734486811849, 105176.0, 1734486915556, 104860.4, -0.00400971577449638], [1734491313334, 104804.2, 1734494513697, 104489.7, -0.00400986604421305], [1734501138715, 103484.9, 1734502089926, 103692.2, 0.0009991860525671034], [1734525731767, 104768.2, 1734526729971, 104977.9, 0.000997563296655791], [1734538731016, 103576.9, 1734539693133, 103783.7, 0.0009926057752807091], [1734548867554, 103594.3, 1734549241643, 103802.0, 0.0010009248376716693], [1734551288233, 103311.9, 1734551871771, 103001.7, -0.004011600779404544], [1734552361043, 102164.1, 1734552458649, 101857.6, -0.004009102904447003], [1734552458652, 101898.0, 1734552473984, 101592.2, -0.004010073608013197], [1734552495039, 101395.4, 1734552500891, 101091.2, -0.004009164002405695], [1734552521038, 100996.9, 1734552538089, 100693.8, -0.004010115816465264], [1734565767360, 100238.6, 1734565974689, 100439.5, 0.0010002090810885553], [1734566334869, 100041.6, 1734572465325, 100242.0, 0.0009991620278924094], [1734573245297, 100095.5, 1734573485205, 99795.0, -0.004011172904454185], [1734573491035, 99836.0, 1734573713416, 100036.0, 0.0009992802591066727], [1734600130004, 101674.1, 1734602492022, 101877.5, 0.0009965154229343307], [1734628947998, 99646.3, 1734629029843, 99845.6, 0.0009960819505316918], [1734629438784, 99354.8, 1734629789882, 99056.7, -0.004009387552785459], [1734629789902, 99110.3, 1734630201344, 98812.9, -0.004009728486867758], [1734630568578, 98588.2, 1734630610451, 98785.6, 0.0009982669538880504], [1734630717089, 98414.3, 1734630774181, 98119.0, -0.004009610778748284], [1734630775344, 98130.6, 1734630797891, 98327.2, 0.0009994467451528441], [1734630877966, 97953.5, 1734630880863, 97659.2, -0.004013540966954498], [1734632576128, 97060.8, 1734632625382, 97255.1, 0.000997838673755914], [1734637567365, 96635.1, 1734637663961, 96345.1, -0.0040100129638144235], [1734639047071, 96000.0, 1734639175073, 95711.9, -0.004010075027243264], [1734639180118, 95778.1, 1734639252043, 95969.9, 0.0009985432932616565], [1734684085702, 96045.0, 1734684433479, 95756.5, -0.004012850302590353], [1734684442848, 95627.9, 1734684571583, 95819.3, 0.0009975098962318194], [1734685408083, 95277.0, 1734685450116, 95467.6, 0.0009964888611424536], [1734685935458, 95084.0, 1734686197447, 95274.4, 0.0009984381953598307], [1734693634628, 94075.0, 1734693713451, 93792.5, -0.0040119679078817186], [1734693766875, 93624.9, 1734693952097, 93344.0, -0.004009298937264315], [1734694566663, 92980.1, 1734694592619, 92701.1, -0.004009673024376269], [1734784746675, 97580.2, 1734785662171, 97287.2, -0.004011701436571368], [1734801085915, 97055.8, 1734801828225, 97250.3, 0.0009999938303532083], [1734806409286, 97358.4, 1734807964400, 97066.3, -0.004009283345507097], [1734843630587, 96133.5, 1734845676852, 96326.0, 0.0009984220252060591], [1734877885384, 95659.0, 1734877955511, 95850.5, 0.0009979029843349982], [1734878190770, 95655.8, 1734879022875, 95847.1, 0.0009958871995083838], [1734897037778, 95151.7, 1734897197024, 94866.2, -0.00400950180359294], [1734897260247, 94863.2, 1734897996738, 94578.6, -0.0040091373735707805], [1734905297751, 94297.7, 1734905616903, 94486.6, 0.0009992252869720506], [1734915219093, 94385.0, 1734916604499, 94101.8, -0.004009506725694999], [1734916654926, 93999.5, 1734919839607, 94187.5, 0.0009960185799602348], [1734920802819, 93746.9, 1734921252706, 93934.7, 0.0009992611888897116], [1734966563282, 93747.6, 1734966645027, 93466.3, -0.0040096409080064834], [1734967512418, 93356.5, 1734967980334, 93543.3, 0.0009969361782190553], [1734979630773, 93043.2, 1734979835053, 92764.0, -0.004009788279936254], [1734984557577, 92596.0, 1734985203276, 92781.2, 0.0009960940362917512], [1735161646021, 98712.9, 1735162630562, 98416.6, -0.004010670964044504], [1735186720197, 98583.0, 1735187655602, 98287.2, -0.004009547530095524], [1735200543732, 96720.0, 1735201147025, 96429.8, -0.004009443138946688], [1735219472658, 95388.0, 1735220382775, 95579.4, 0.001002523556331126], [1735223766278, 95381.5, 1735223973449, 95572.6, 0.000999527061103401], [1735254298503, 95445.4, 1735254971755, 95636.3, 0.0009961039898030996], [1735285285766, 94698.7, 1735312655996, 94888.3, 0.0009981388643278697], [1735312671456, 94911.5, 1735312759456, 94626.7, -0.004009721357714046], [1735313781314, 94181.1, 1735313874354, 94369.5, 0.0009964077376694034], [1735314006855, 94141.6, 1735314770503, 94330.1, 0.0009983017085745125], [1735319002372, 94106.7, 1735320033325, 93824.3, -0.0040098812354582005], [1735320066536, 93815.1, 1735320233775, 93533.6, -0.004009613657551924], [1735320238981, 93549.4, 1735320427003, 93736.5, 0.000996020760322903], [1735354375963, 94314.4, 1735357543016, 94503.2, 0.000997815946973236], [1735366096017, 94582.4, 1735372192295, 94298.2, -0.004013843318324216], [1735397342810, 94519.7, 1735398413020, 94708.8, 0.0009966465629382979], [1735462140761, 95130.6, 1735477310684, 94845.2, -0.004009113798062568], [1735482720446, 94215.0, 1735482785050, 93932.3, -0.004009614371201286], [1735482785050, 94083.1, 1735482941712, 94271.5, 0.0009984831046497842], [1735489121889, 94055.7, 1735490015026, 93773.5, -0.004009378982335109], [1735490242593, 93774.3, 1735492196991, 93962.4, 0.0010018645756173514], [1735497235668, 93640.8, 1735501463026, 93359.8, -0.004009860775194495], [1735501465888, 93389.7, 1735507079470, 93576.7, 0.000998360703038271], [1735566605456, 92934.1, 1735566677164, 92655.2, -0.004010084701128513], [1735569310750, 92469.8, 1735569330043, 92192.1, -0.004012188679941019], [1735569463802, 92113.0, 1735569604489, 92297.4, 0.0009978894313381623], [1735570809657, 91658.1, 1735570871256, 91841.7, 0.00099909191576364]], 'high_order': [[1733181128783, 95541.9, 1733182871127, 95829.4, -0.004009150958898754], [1733236827767, 94542.3, 1733237107556, 94826.8, -0.0040092350196684326], [1733238197136, 95555.0, 1733238435476, 95842.6, -0.004009784940610105], [1733239530487, 96248.9, 1733239706750, 96056.5, 0.0009989838844910457], [1733266837122, 96139.9, 1733271538857, 95948.2, 0.0009939692052934887], [1733272474089, 96033.1, 1733273653581, 95841.3, 0.0009972280390824215], [1733338097230, 96206.0, 1733339843984, 96495.6, -0.004010207263580256], [1733342196043, 97175.6, 1733342795874, 97468.2, -0.0040110439246064935], [1733342798384, 97605.0, 1733343031943, 97898.7, -0.004009067158444623], [1733343047987, 97893.1, 1733343216370, 98187.7, -0.004009405157258227], [1733343380824, 98397.3, 1733343620332, 98693.4, -0.004009228911768913], [1733355042047, 98995.4, 1733357495517, 98797.7, 0.0009970624897722722], [1733365771645, 99065.7, 1733365787107, 99363.9, -0.0040101235846513586], [1733365790567, 99312.5, 1733365929045, 99611.6, -0.004011705475141735], [1733365934173, 99534.1, 1733365949416, 99833.9, -0.0040120330620360125], [1733365952753, 99817.5, 1733365952837, 100128.7, -0.004117689783855404], [1733365952837, 99862.0, 1733365952837, 100231.3, -0.004698103382668183], [1733365952837, 99862.0, 1733365952837, 100234.5, -0.004730147603693057], [1733365952837, 99862.0, 1733365952844, 100234.5, -0.004730147603693057], [1733365952844, 99801.5, 1733365952844, 100234.5, -0.005338612145108112], [1733365952844, 99801.5, 1733365952844, 100234.5, -0.005338612145108112], [1733365952844, 99801.5, 1733365952844, 100234.5, -0.005338612145108112], [1733365952844, 99801.5, 1733365952844, 100234.5, -0.005338612145108112], [1733365952844, 99801.5, 1733365952844, 100234.5, -0.005338612145108112], [1733365952844, 99801.5, 1733365952844, 100234.5, -0.005338612145108112], [1733365952844, 100000.0, 1733365952896, 100301.1, -0.004011000000000097], [1733366012069, 100280.0, 1733366035023, 100582.0, -0.004011567610690102], [1733366467231, 100901.7, 1733366470167, 101205.6, -0.004011842218713978], [1733366471527, 101332.0, 1733366471548, 101637.3, -0.004012868590376305], [1733367893699, 102570.0, 1733367988171, 102878.7, -0.004009651945013125], [1733367989042, 102916.1, 1733367992432, 103226.0, -0.004011190668904096], [1733400518976, 102851.1, 1733402776419, 103160.6, -0.004009204568546142], [1733409843894, 103457.4, 1733410284131, 103250.0, 0.0010046898530216017], [1733445168648, 97287.6, 1733445697588, 97580.4, -0.004009633293451497], [1733491809995, 98240.1, 1733491824353, 98043.7, 0.0009991836327528656], [1733491865554, 98241.0, 1733491947023, 98536.7, -0.004009944931342323], [1733505578213, 99295.9, 1733506695042, 99595.0, -0.00401220896331067], [1733514128039, 101649.8, 1733515518014, 101446.3, 0.0010019714746118966], [1733552418096, 99336.3, 1733562409189, 99635.5, -0.004011990581489377], [1733662262885, 100168.4, 1733662504042, 99968.0, 0.0010006309375011355], [1733686903059, 99869.9, 1733687939540, 100170.5, -0.004009915900586746], [1733687965026, 100205.0, 1733690358777, 100004.6, 0.000999900204580518], [1733836366002, 97698.5, 1733837132975, 97503.0, 0.0010010542638833062], [1733842114387, 98268.3, 1733842347081, 98072.0, 0.0009975923059624145], [1733890054426, 97466.6, 1733898678440, 97759.9, -0.00400923598442937], [1733904684773, 97835.1, 1733906306346, 98129.7, -0.004011189235764933], [1733928640190, 99333.4, 1733929538789, 99632.6, -0.004012078515383765], [1733929631218, 99639.7, 1733930121516, 99939.8, -0.0040118517016812785], [1733930807505, 100558.6, 1733931068731, 100357.4, 0.001000823400485019], [1733946546775, 101020.8, 1733947349026, 101324.9, -0.0040102711520794134], [1733948904007, 101407.1, 1733949270458, 101204.0, 0.001002818343094348], [1733954661556, 101634.4, 1733955436118, 101431.1, 0.0010003069826750597], [1733972406432, 101720.4, 1733974330005, 101517.0, 0.0009995989005154868], [1734013879580, 101517.6, 1734014493193, 101314.6, 0.0009996532620945029], [1734015346838, 101546.2, 1734016127092, 101343.1, 0.0010000748427808634], [1734018471410, 101762.0, 1734018787152, 101558.5, 0.000999764155578676], [1734019278443, 102135.1, 1734020150021, 102442.5, -0.004009739061301975], [1734108844154, 101171.8, 1734109169936, 100969.6, 0.0009985806321524135], [1734111830158, 101501.2, 1734113969910, 101298.0, 0.001001946775013419], [1734138028937, 101602.5, 1734138145810, 101908.5, -0.004011736915922381], [1734139085069, 102216.9, 1734139508060, 102525.0, -0.004014178672998469], [1734236269937, 102351.2, 1734236498025, 102659.2, -0.004009246594080084], [1734236498038, 102570.8, 1734236504727, 102879.6, -0.004010603407597623], [1734301585022, 103276.8, 1734303937767, 103587.6, -0.004009388362149146], [1734304091372, 103782.6, 1734304168772, 103575.0, 0.0010003353163247084], [1734304839913, 104496.7, 1734304938247, 104287.5, 0.0010019770959274208], [1734305224277, 105062.3, 1734305302393, 104852.1, 0.0010007176694208928], [1734309009026, 105388.2, 1734309011861, 105705.6, -0.004011722374990811], [1734309242607, 106088.6, 1734309243716, 106407.9, -0.004009748455536032], [1734341707581, 104866.1, 1734343398359, 104657.0, 0.0009939713596672792], [1734346396604, 104618.3, 1734348865311, 104409.0, 0.0010006060125236091], [1734365490911, 106679.6, 1734365626609, 106466.3, 0.0009994450672856656], [1734367071052, 107050.6, 1734367404154, 106836.4, 0.0010009229280359975], [1734373059545, 107363.4, 1734373393033, 107686.5, -0.004009405439842627], [1734440105682, 107073.3, 1734442050868, 107395.5, -0.004009153542479659], [1734447093338, 108007.5, 1734447468134, 108332.6, -0.004009976159063177], [1734447470128, 108289.1, 1734478911779, 106291.2, 0.017449686995274716], [1734520563666, 104585.5, 1734521799908, 104900.3, -0.004009977482538284], [1734590856626, 101264.2, 1734593427021, 101569.1, -0.004010935750245469], [1734617163572, 102163.6, 1734618674021, 102471.2, -0.004010857095873565], [1734643118047, 97542.6, 1734643400074, 97836.2, -0.004009966927270735], [1734655610578, 97541.0, 1734655943876, 97346.2, 0.000997108908048939], [1734678090150, 97502.2, 1734678303460, 97795.6, -0.004009162870171167], [1734707176378, 96122.8, 1734707351492, 95930.6, 0.0009995256068279232], [1734717401857, 97278.9, 1734719968828, 97084.5, 0.0009983778599469426], [1734720626533, 97101.7, 1734721237171, 96907.2, 0.0010030545294263957], [1734737107261, 97671.7, 1734739611961, 97475.7, 0.001006722520443538], [1734838123522, 97193.0, 1734840039074, 96999.0, 0.000996028520572457], [1734907010556, 95288.0, 1734908349020, 95574.8, -0.00400982285282525], [1734926272770, 95895.0, 1734926701021, 96183.6, -0.004009541686219253], [1734944746777, 95960.3, 1734949215349, 96249.6, -0.004014788407289304], [1734951787305, 96436.1, 1734956571140, 96243.7, 0.0009951034934013734], [1734996243939, 95387.3, 1735027453434, 94338.5, 0.009995174410010632], [1735050135536, 96610.6, 1735050781029, 96901.9, -0.004015197090174171], [1735064238121, 99360.4, 1735064425512, 99162.0, 0.0009967713495516737], [1735171677414, 99816.0, 1735183674577, 98758.3, 0.00959649755550207], [1735226537480, 95812.4, 1735226763673, 96100.8, -0.004010048803703924], [1735229630083, 96372.2, 1735230191495, 96179.3, 0.0010016145734972346], [1735288514596, 96314.2, 1735288514596, 96314.2, -0.001], [1735288544814, 96313.7, 1735288544814, 96313.7, -0.001], [1735290345131, 96651.0, 1735290345131, 96651.0, -0.001], [1735290345132, 96629.4, 1735290345132, 96629.4, -0.001], [1735290345132, 96629.4, 1735290345132, 96629.4, -0.001], [1735290345132, 96629.4, 1735290345132, 96629.4, -0.001], [1735290345132, 96629.4, 1735290345132, 96629.4, -0.001], [1735580646126, 93858.4, 1735580865922, 94141.0, -0.004010918575215404], [1735582712474, 94526.2, 1735583257506, 94337.0, 0.0010015614718458252], [1735589611469, 94709.6, 1735590264823, 94994.6, -0.0040091986451215025]]}

low_returns = [trade[-1] for trade in data["low_order"]]
high_returns = [trade[-1] for trade in data["high_order"]]
print(len(low_returns) + len(high_returns))

# all_returns = low_returns + high_returns
# total_return = sum(all_returns)
# print(total_return)

# winning_trades = len([r for r in all_returns if r > 0])
# total_trades = len(all_returns)
# win_rate = winning_trades / total_trades
# print(f"胜率: {win_rate:.2%}")

# Calculate cumulative returns
cumulative_low_returns = np.cumprod(1 + np.array(low_returns)) - 1
cumulative_high_returns = np.cumprod(1 + np.array(high_returns)) - 1
print(
    "total_result: ",
    cumulative_low_returns[-1]
    + cumulative_high_returns[-1],
)

# Calculate individual returns
individual_low_returns = np.array(low_returns)
individual_high_returns = np.array(high_returns)

low_order_times = [trade[0] for trade in data["low_order"]]
high_order_times = [trade[0] for trade in data["high_order"]]
plt.figure(figsize=(12, 12))
plt.subplot(2, 1, 1)
plt.plot(
    low_order_times,
    cumulative_low_returns,
    label="Cumulative Low Returns",
    color="blue",
)
plt.plot(
    high_order_times,
    cumulative_high_returns,
    label="Cumulative High Returns",
    color="orange",
)
plt.scatter(
    low_order_times,
    individual_low_returns,
    color="blue",
    alpha=0.5,
    label="Individual Low Returns",
    s=10,
)
plt.scatter(
    high_order_times,
    individual_high_returns,
    color="orange",
    alpha=0.5,
    label="Individual High Returns",
    s=10,
)
plt.title("Cumulative and Individual Returns Visualization")
plt.xlabel("Time")
plt.ylabel("Return")
plt.legend()
plt.grid()


# Define a time threshold (in milliseconds, for example)
time_threshold = 1000 * 3 * 60  # 1 second

# Filter low order times and returns
filtered_low_order_times = []
filtered_low_returns = []

last_time = None
for time, return_value in zip(low_order_times, individual_low_returns):
    if last_time is None or (time - last_time) > time_threshold:
        filtered_low_order_times.append(time)
        filtered_low_returns.append(return_value)
        last_time = time

# Filter high order times and returns
filtered_high_order_times = []
filtered_high_returns = []

last_time = None
for time, return_value in zip(high_order_times, individual_high_returns):
    if last_time is None or (time - last_time) > time_threshold:
        filtered_high_order_times.append(time)
        filtered_high_returns.append(return_value)
        last_time = time

# Print the count of filtered high returns
print(
    f"Filtered Returns Count: {len(filtered_high_returns) + len(filtered_low_returns)}"
)

# Plotting
# plt.figure(figsize=(12, 6))
plt.subplot(2, 1, 2)
plt.plot(
    filtered_low_order_times,
    np.cumprod(1 + np.array(filtered_low_returns)) - 1,
    label="Cumulative Low Returns",
    color="blue",
)
plt.plot(
    filtered_high_order_times,
    np.cumprod(1 + np.array(filtered_high_returns)) - 1,
    label="Cumulative High Returns",
    color="orange",
)
plt.scatter(
    filtered_low_order_times,
    filtered_low_returns,
    color="blue",
    alpha=0.5,
    label="Individual Low Returns",
    s=10,
)
plt.scatter(
    filtered_high_order_times,
    filtered_high_returns,
    color="orange",
    alpha=0.5,
    label="Individual High Returns",
    s=10,
)
plt.title("Cumulative and Individual Returns Visualization")
plt.xlabel("Time")
plt.ylabel("Return")
plt.legend()
plt.grid()
plt.tight_layout()
plt.show()


low_order_durations = [trade[2] - trade[0] for trade in data["low_order"]]
high_order_durations = [trade[2] - trade[0] for trade in data["high_order"]]

# 绘制开仓到平仓时间分布图
plt.figure(figsize=(12, 6))
plt.hist(
    low_order_durations,
    bins=50,
    alpha=0.5,
    label="Low Order Durations",
    color="blue",
    density=True,
)
plt.hist(
    high_order_durations,
    bins=50,
    alpha=0.5,
    label="High Order Durations",
    color="orange",
    density=True,
)
plt.title("Distribution of Trade Durations")
plt.xlabel("Duration (milliseconds)")
plt.ylabel("Density")
plt.legend()
plt.grid()
plt.show()
