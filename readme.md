# 新参数待加入

## 过滤[]

### 1.1 line age []

打破趋势是立刻的，而生成趋势需要时间，所以需要设置一个参数来控制趋势的生成时间。

### 1.2 有效性阈值 []

两点连线，向左延伸，直到触碰到第一个数据的距离，如果距离大于阈值，则认为趋势有效。

### 1.3 距离阈值 []

两点连线之间的距离，如果距离大于阈值，则认为趋势有效。

## 开仓

### 2.1 潜在利润空间比例

当前开仓价格与最近的反向趋势线的价差比率，必须大于阈值才开仓，否则认为趋势不够。

### 2.2 反转百分比

在进入划分的趋势线前附近的区域，如果进入该区域后又反转，则认为开始反弹，进行开仓。

### 2.3 k线斜率要求

避免有过大的斜率，以免因微小波动而止损。

### 2.4 止盈价格

在接近止盈价格时，如果反转，则进行平仓。
当接近潜在利润率附近时，根据是否出现反弹进行平仓，即在止盈空间附近反弹。

### 2.5 止损比例

当回至开仓价格附近时，进行止损。

## 3. 待开发的参数

### 3.1 更好的止盈办法

避免没完全吃完整波数据，考虑最近的趋势线，作为止盈参考。如果一直没突破，则仍认为有盈利空间。

## 4. 待优化

### 4.1 数据总量

理想情况下是参与计算的数据量越多越好，但实际情况下，数据量越多，计算时间越长，所以需要设置一个数据量阈值。限制最大数据量，但问题是现在的backtest中无法修改，后续写实盘时需要修改。

无法解决：核心原因在于其trend中对应数据点与原始data一致，修改data大小会导致映射关系出错。

### 4.2 将交易策略融入plotter中

在策略中使用tick数据，trend数据以及当前时间点，比较当前tick下的数据与trend计算点相关的数据，如果满足条件，则进行交易发出信号进行记录，止损止盈也同样。
